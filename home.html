<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Maps Draft Integration</title>

    <!-- Bootstrap core CSS -->
    <link href="public/bootstrap.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="public/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="public/navbar-fixed-top.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="public/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
<style>
htm,body{
    background: #90a4ae !important;
}
.navbar{
    background: #b0bec5 !important;
}
a.navbar-brand{
    color:#FFF !important;
}
#map {
    min-height: 600px;
    max-height: 100%;
}
#list>.list-group{
    height: 600px !important;
    overflow:auto;
}
</style>
</head>
<body>
    <!-- Fixed navbar -->
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Maps Draft Integration</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <li class="active"><a href="#">Logout</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">
	    <div id="map" class="col-md-8"></div>
	    <div id="list" class="col-md-4">
	       <ul class="list-group">
			  <li class="list-group-item" onclick="toggleBounce(1);"><span class="pull-xs-left"><img src="http://maps.google.com/mapfiles/ms/icons/red-dot.png"/>Point 12</li>
			  <li class="list-group-item" onclick="toggleBounce(2);"><span class="pull-xs-left"><img src="http://maps.google.com/mapfiles/ms/icons/blue-dot.png"/>Point 11</li>
			  <li class="list-group-item" onclick="toggleBounce(3);"><span class="pull-xs-left"><img src="http://maps.google.com/mapfiles/ms/icons/green-dot.png"/>Point 10</li>
			  <li class="list-group-item" onclick="toggleBounce(4);"><span class="pull-xs-left"><img src="http://maps.google.com/mapfiles/ms/icons/green-dot.png"/>Point 9</li>
			  <li class="list-group-item" onclick="toggleBounce(5);"><span class="pull-xs-left"><img src="http://maps.google.com/mapfiles/ms/icons/blue-dot.png"/>Point 8</li>
			  <li class="list-group-item" onclick="toggleBounce(6);"><span class="pull-xs-left"><img src="http://maps.google.com/mapfiles/ms/icons/yellow-dot.png"/>Point 7</li>
			  <li class="list-group-item" onclick="toggleBounce(7);"><span class="pull-xs-left"><img src="http://maps.google.com/mapfiles/ms/icons/yellow-dot.png"/>Point 6</li>
			  <li class="list-group-item" onclick="toggleBounce(8);"><span class="pull-xs-left"><img src="http://maps.google.com/mapfiles/ms/icons/yellow-dot.png"/>Point 5</li>
			  <li class="list-group-item" onclick="toggleBounce(9);"><span class="pull-xs-left"><img src="http://maps.google.com/mapfiles/ms/icons/red-dot.png"/>Point 4</li>
			  <li class="list-group-item" onclick="toggleBounce(10);"><span class="pull-xs-left"><img src="http://maps.google.com/mapfiles/ms/icons/red-dot.png"/>Point 3</li>
			  <li class="list-group-item" onclick="toggleBounce(11);"><span class="pull-xs-left"><img src="http://maps.google.com/mapfiles/ms/icons/blue-dot.png"/>Point 2</li>
			  <li class="list-group-item" onclick="toggleBounce(12);"><span class="pull-xs-left"><img src="http://maps.google.com/mapfiles/ms/icons/red-dot.png"/>Point 1</li>
			</ul>
	    </div>
    </div> <!-- /container -->
	<script src="public/jquery.js"></script>
    <script src="public/bootstrap.js"></script>
    <script src="public/ie10-viewport-bug-workaround.js"></script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC561DRGJw_8b7JAU0p5RdbxMNhfmyW65o&signed_in=true&callback=initMap"></script>
    <script>
        var marker = new Array();

		function initMap() {
		    var icons = new Array();
		    icons['red'] = 'http://maps.google.com/mapfiles/ms/icons/red-dot.png';
		    icons['blue'] = 'http://maps.google.com/mapfiles/ms/icons/blue-dot.png';
		    icons['green'] = 'http://maps.google.com/mapfiles/ms/icons/green-dot.png';
		    icons['yellow'] = 'http://maps.google.com/mapfiles/ms/icons/yellow-dot.png';
		    icons['purple'] = 'http://maps.google.com/mapfiles/ms/icons/purple-dot.png';
		
		    var points = [
		            [ 'Point 12', -22.952752, -43.188112, 12, 'red' ],
		            [ 'Point 11', -22.950934, -43.183155, 11, 'blue' ],
		            [ 'Point 10', -22.949274, -43.182265, 10, 'green' ],
		            [ 'Point 9', -22.950331, -43.184679, 9, 'green' ],
		            [ 'Point 8', -22.948503, -43.184228, 8, 'blue' ],
		            [ 'Point 7', -22.948157, -43.182565, 7, 'yellow' ],
		            [ 'Point 6', -22.947989, -43.185773, 6, 'yellow' ],
		            [ 'Point 5', -22.949592, -43.188746, 5, 'yellow' ],
		            [ 'Point 4', -22.949434, -43.186282, 4, 'red' ],
		            [ 'Point 3', -22.952013, -43.186153, 3, 'red' ],
		            [ 'Point 2', -22.955757, -43.189865, 2, 'blue' ],
		            [ 'Point 1', -22.951005, -43.183299, 1, 'red' ] ];
		
		    var center = {
		        lat : -22.950857,
		        lng : -43.181084
		    };
		
		    var map = new google.maps.Map(document.getElementById('map'), {
		        center : center,
		        zoom : 15
		    });
		    var infoWindow = new google.maps.InfoWindow({
		        map : map
		    });
		    for (var i = 0; i < points.length; i++) {
		        var pos = points[i];
		        marker[i] = new google.maps.Marker({
		            position : {
		                lat : pos[1],
		                lng : pos[2]
		            },
		            map : map,
		            icon : icons[pos[4]],
		            title : pos[0],
		            zIndex : pos[3],
		            identificator: i,
		            animation: google.maps.Animation.DROP
		        });
		        marker[i].addListener('click', toggleBounce);
		    }
		
		    // Try HTML5 geolocation.
		    if (navigator.geolocation) {
		        navigator.geolocation.getCurrentPosition(function(position) {
		            var pos = {
		                lat : position.coords.latitude,
		                lng : position.coords.longitude
		            };
		
		            infoWindow.setPosition(pos);
		            infoWindow.setContent('Você está aqui');
		            map.setCenter(pos);
		        }, function() {
		            handleLocationError(true, infoWindow, map.getCenter());
		        });
		    } else {
		        // Browser doesn't support Geolocation
		        handleLocationError(false, infoWindow, map.getCenter());
		    }
		}
		
		function handleLocationError(browserHasGeolocation, infoWindow, pos) {
		    infoWindow.setPosition(pos);
		    infoWindow
		            .setContent(browserHasGeolocation ? 'Error: The Geolocation service failed.'
		                    : 'Error: Your browser doesn\'t support geolocation.');
		}
		
		function toggleBounce(i) {
		  var pointer = this;
		  if(this.identificator == undefined){
			  pointer = marker[i];
		  }
		  if (pointer.getAnimation() !== null) {
			  pointer.setAnimation(null);
		  } else {
			  pointer.setAnimation(google.maps.Animation.BOUNCE);
		  }
		}
    </script>
</body>
</html>
